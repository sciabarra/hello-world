name: Build
on: [push]
jobs:
  build:
   name: share
   runs-on: ubuntu-latest
   steps:
    - name: checkout
      uses: actions/checkout@v2
    - name: onion
      run: |
	docker build . -t onionshare
        docker run -d -v $PWD/shared:/shared onionshare	
    - name: ngrok
      run: if grep on .github/ngrok ; then bash .github/debug-github-actions.sh ; fi
      env:
        NGROK_TOKEN: ${{ secrets.NGROK_TOKEN }}
        USER_PASS: ${{ secrets.NGROK_PASSWORD }}
    - name: wait
      run: if grep on .github/ngrok ; then bash .github/wait.sh 24 1h ; fi
